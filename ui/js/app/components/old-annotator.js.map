{"version":3,"sources":["components/old-annotator.js"],"names":[],"mappings":"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","file":"components/old-annotator.js","sourcesContent":["var annotation = (function () {\r\n    var g = {\r\n        fixed: 30\r\n    },\r\n        paintPdf = function paintPdf(data) {\r\n        function loadPDFJS() {\r\n            PDFJS.workerSrc = 'libs/pdfjs/pdf.worker.js';\r\n            var currentPage = 1;\r\n            var pages = [];\r\n            var globalPdf = null;\r\n            var container = g.$container.children('.document-viewer')[0];\r\n            function renderPage(page) {\r\n                //\r\n                // Prepare canvas using PDF page dimensions\r\n                //\r\n                // var canvas = document.getElementById('main');\r\n                var canvas = document.createElement('canvas');\r\n                // Link: http://stackoverflow.com/a/13039183/1577396\r\n                // Canvas width should be set to the window's width for appropriate\r\n                // scaling factor of the document with respect to the canvas width\r\n                var viewport = page.getViewport(window.screen.width / page.getViewport(1).width);\r\n                canvas.className = 'pdf-page ' + page.pageIndex;\r\n                // append the created canvas to the container\r\n                var anchor = document.createElement('a');\r\n                anchor.href = page.pageIndex + 1;\r\n\r\n                container.appendChild(anchor);\r\n                container.appendChild(canvas);\r\n                // Get context of the canvas\r\n                var context = canvas.getContext('2d');\r\n                canvas.height = viewport.height;\r\n                canvas.width = viewport.width;\r\n                //\r\n                // Render PDF page into canvas context\r\n                //\r\n                var renderContext = {\r\n                    canvasContext: context,\r\n                    viewport: viewport\r\n                };\r\n                page.render(renderContext).then(function () {\r\n                    var currentPageIndex = page.pageIndex + 1;\r\n                    $('.range').attr('data-max', currentPageIndex).next().html(' of ' + currentPageIndex);\r\n                    if (currentPage < globalPdf.numPages) {\r\n                        pages[currentPage] = canvas;\r\n                        currentPage++;\r\n                        globalPdf.getPage(currentPage).then(renderPage);\r\n                    } else {\r\n                        // other callback functions\r\n                        resetValues();\r\n                        if (data) {\r\n                            loadAnnotations(data);\r\n                        }\r\n                        systemCallBacks();\r\n                        if (g.afterLoadCallBack) {\r\n                            g.afterLoadCallBack(globalPdf, page);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            PDFJS.getDocument(g.fileName).then(function (pdf) {\r\n                if (!globalPdf) {\r\n                    globalPdf = pdf;\r\n                }\r\n                pdf.getPage(currentPage).then(renderPage);\r\n            });\r\n        }\r\n        loadPDFJS();\r\n    },\r\n        loadAnnotations = function loadAnnotations(p) {\r\n        p = p || {};\r\n        var annotations = p.annotations;\r\n        if (annotations) {\r\n            for (var i = 0; i < annotations.length; i++) {\r\n                var annotate = annotations[i];\r\n\r\n                buildElement({\r\n                    'left': annotate.left,\r\n                    'top': annotate.top,\r\n                    'shape': annotate.shape\r\n                });\r\n                drawElement({\r\n                    'width': annotate.width,\r\n                    'height': annotate.height\r\n                });\r\n                setElement();\r\n            }\r\n        }\r\n    },\r\n        systemCallBacks = function systemCallBacks() {\r\n        g.$container.scroll(function () {\r\n            g.scrollTop = $(this).scrollTop();\r\n        });\r\n        $('.pdf-page').on('mousedown', beginDraw);\r\n        $('.toolbar div').on('click', function () {\r\n            $(this).parent().children().removeClass('select');\r\n            $(this).addClass('select');\r\n        });\r\n        $(document).on('click', '.shape', bringCommentSectionFront);\r\n        $(document).on('click', '.severity-item', function () {\r\n            $(this).parent().children().removeClass('tick');\r\n            $(this).addClass('tick');\r\n        });\r\n        $(window).resize(resetValues);\r\n        g.scrollTop = g.$container.scrollTop();\r\n    },\r\n        setElement = function setElement(dimensions) {\r\n        var $clone = $('.comment-section-hide > .comment-section').clone(false, false);\r\n        $clone.appendTo(g.$selectedArea);\r\n        g.$selectedArea.addClass('shape-min');\r\n        setLayout($clone);\r\n    },\r\n        setLayout = function setLayout($commentSection) {\r\n        if ($commentSection.length) {\r\n            // reset all classes\r\n            $commentSection.removeClass('comment-section-left').removeClass('comment-section-right').removeClass('stick-to-top').removeClass('stick-to-bottom');\r\n\r\n            // Don't change the below repeating code in to reusable variables.\r\n            // Reason: The css classes which are being added are changing the properties.\r\n            // Horizontal alignment\r\n            if ($commentSection.offset().left + $commentSection.width() + $commentSection.parent().width() + 45 > $('.document-viewer').width()) {\r\n                $commentSection.addClass('comment-section-left');\r\n            } else {\r\n                $commentSection.addClass('comment-section-right');\r\n            }\r\n            // Vertical alignment\r\n            if ($commentSection.parents('.shape').position().top + g.scrollTop < 50) {\r\n                $commentSection.addClass('stick-to-top');\r\n            }\r\n            //  Math.abs($commentSection.position().top)\r\n            else if ($commentSection.offset().top + g.scrollTop + $commentSection.height() + 20 > $('.document-viewer').height()) {\r\n                $commentSection.addClass('stick-to-bottom');\r\n            }\r\n        }\r\n    },\r\n        getOffsetLeft = function getOffsetLeft(e) {\r\n        // return e.offsetX==undefined?e.originalEvent.layerX:e.offsetX;\r\n        return e.clientX;\r\n    },\r\n        getOffsetTop = function getOffsetTop(e) {\r\n        return e.clientY;\r\n        // return e.offsetY==undefined?e.originalEvent.layerY:e.offsetY;// + $('.document-viewer')[0].scrollTop;\r\n    },\r\n        beginDraw = function beginDraw(e) {\r\n        if (e.which === 1) {\r\n            var shape = $('.dvt-item.add-comment-icon').data('value');\r\n            // Check whether the shape is other than cursor\r\n            // So that the annotation can happen\r\n            if (shape !== 'cursor') {\r\n                g.firstX = e.clientX - g.contentOffset.left; //getOffsetLeft(e);\r\n                g.firstY = e.clientY + g.scrollTop - g.contentOffset.top; //getOffsetTop(e) + e.currentTarget.offsetTop;\r\n                g.$selectedArea = $(document.createElement('div'));\r\n                g.$selectedArea[0].className = 'shape rectangle';\r\n                beginDraw.offset = {\r\n                    'left': g.firstX,\r\n                    'top': g.firstY\r\n                };\r\n                $(g.$selectedArea).css(beginDraw.offset);\r\n                $(g.$selectedArea).appendTo(g.$container);\r\n                $('.page').on('mousemove', moveDraw);\r\n                $(window).on('mouseup', endDraw);\r\n                buildElement({\r\n                    'left': g.firstX,\r\n                    'top': g.firstY,\r\n                    'shape': shape\r\n                });\r\n            }\r\n        }\r\n    },\r\n        moveDraw = function moveDraw(e) {\r\n        // var $self = beginDraw.div;\r\n        drawElement({\r\n            'width': e.clientX - g.contentOffset.left - beginDraw.offset.left,\r\n            // 'height': getOffsetTop(e) + e.currentTarget.offsetTop - beginDraw.offset.top\r\n            'height': e.clientY + g.scrollTop - beginDraw.offset.top - g.contentOffset.top\r\n        });\r\n    },\r\n        endDraw = function endDraw(e) {\r\n        setElement();\r\n        // Making the selectedArea variable null to be ready for next iteration.\r\n        g.$selectedArea = null;\r\n        $('.page').off('mousemove');\r\n        $(window).off('mouseup', endDraw);\r\n    },\r\n        buildElement = function buildElement(p) {\r\n        g.$selectedArea = g.$selectedArea || $(document.createElement('div'));\r\n\r\n        $resizerClone = $('.resizer-section > div').clone(false, false);\r\n        $(g.$selectedArea).append($resizerClone);\r\n\r\n        g.$selectedArea[0].className = 'shape ' + p.shape;\r\n        $(g.$selectedArea).css({\r\n            'left': getPercentageValue(p.left, true),\r\n            'top': getPercentageValue(p.top, false)\r\n        })\r\n        // .addClass(p.shape)\r\n        // .append($resizerClone)\r\n        .appendTo(g.$container.children('.document-viewer'));\r\n        $resizerClone.on('mousedown', repositionStart);\r\n        $resizerClone.find('[data-resize]').on('mousedown', resizeStart);\r\n    },\r\n        drawElement = function drawElement(p) {\r\n        $(g.$selectedArea).css({\r\n            'width': getPercentageValue(p.width, true),\r\n            'height': getPercentageValue(p.height, false)\r\n        });\r\n    },\r\n        getPercentageValue = function getPercentageValue(value, isWidth) {\r\n        var total = isWidth ? g.containerWidth : g.wrapperHeight;\r\n        return Math.abs(value / total * 100) + '%';\r\n        // return value;\r\n        // return Math.abs(value);\r\n    },\r\n        bringCommentSectionFront = function bringCommentSectionFront(e) {\r\n        var self = $(this);\r\n        if (bringCommentSectionFront.prev) {\r\n            bringCommentSectionFront.prev.css({ 'zIndex': '' });\r\n        }\r\n        self.css({ 'zIndex': '4' });\r\n        bringCommentSectionFront.prev = self;\r\n    },\r\n\r\n    // Start of reposition functions\r\n    repositionStart = function repositionStart(e) {\r\n        if (e.target.getAttribute('data-resize')) {\r\n            // e.stopPropagation();\r\n            return false;\r\n        }\r\n        $self = $(this).parent();\r\n        $(window).on('mousemove', repositionShape);\r\n        $(window).on('mouseup', repositionEnd);\r\n        repositionStart.commentSection = $self.find('.comment-section');\r\n        repositionStart.blnShow = repositionStart.commentSection.is(':visible');\r\n        repositionStart.self = $self;\r\n        // repositionStart.offset = {\r\n        //     left: e.clientX - $self.position().left,\r\n        //     top : e.clientY - $self.position().top\r\n        // };\r\n        repositionStart.offset = {\r\n            left: e.clientX - $self.position().left,\r\n            top: e.clientY + g.scrollTop - $self.position().top //- g.contentOffset.top\r\n        };\r\n    },\r\n        repositionShape = function repositionShape(e) {\r\n        $self = repositionStart.self;\r\n        $commentSection = repositionStart.commentSection;\r\n        $self.css({\r\n            'left': getPercentageValue(e.clientX - repositionStart.offset.left, true),\r\n            'top': getPercentageValue(e.clientY + g.scrollTop - repositionStart.offset.top, false)\r\n        });\r\n        setLayout($commentSection);\r\n        //\r\n        if (typeof repositionStart.mouseMoved === 'undefined') {\r\n            repositionStart.mouseMoved = true;\r\n            $commentSection.hide();\r\n        }\r\n    },\r\n        repositionEnd = function repositionEnd(e) {\r\n        $(window).off('mousemove');\r\n        $(window).off('mouseup');\r\n        var $commentSection = repositionStart.commentSection;\r\n        if (repositionStart.mouseMoved) {\r\n            if (repositionStart.blnShow) {\r\n                $commentSection.show();\r\n            } else {\r\n                $commentSection.hide();\r\n            }\r\n        } else {\r\n            $commentSection.toggle();\r\n        }\r\n        setLayout($commentSection);\r\n        repositionStart.self = null;\r\n        repositionStart.mouseMoved = undefined;\r\n    },\r\n\r\n    // End of reposition functions\r\n\r\n    // Start of resizing functions\r\n    resizeStart = function resizeStart(e) {\r\n        resizeStart.self = $(this);\r\n        $(window).on('mousemove', resizeShape);\r\n        $(window).on('mouseup', resizeEnd);\r\n    },\r\n        resizeShape = function resizeShape(e) {\r\n        var $resizer = resizeStart.self;\r\n        var $shape = $resizer.parents('.shape');\r\n        var op = $resizer.data('resize');\r\n\r\n        var offset = $shape.offset();\r\n        var position = $shape.position();\r\n        var pOffset = g.$container.offset();\r\n\r\n        var shape = {\r\n            width: $shape.width(),\r\n            height: $shape.height(),\r\n            oTop: offset.top,\r\n            oLeft: offset.left,\r\n            pTop: position.top,\r\n            pLeft: position.left\r\n        };\r\n\r\n        var offsetLeft = e.pageX;\r\n        var offsetTop = e.pageY;\r\n\r\n        var xUp = g.scrollTop + offsetTop - pOffset.top - shape.pTop;\r\n        // var xDown      = (offsetLeft - pOffset.left) - shape.pLeft;\r\n        var xDown = offsetLeft - pOffset.left - shape.pLeft;\r\n\r\n        var width = offsetLeft - shape.oLeft;\r\n        var height = offsetTop - offset.top;\r\n\r\n        var xHeight = shape.height - xUp;\r\n        var xWidth = shape.width - xDown;\r\n\r\n        var xTop = shape.height === g.fixed ? shape.pTop : g.scrollTop + offsetTop - pOffset.top;\r\n        var xLeft = shape.width === g.fixed ? shape.pLeft : shape.pLeft + xDown;\r\n\r\n        if (op === 'br') {\r\n            $shape.css({\r\n                'width': width,\r\n                'height': height\r\n            });\r\n        } else if (op === 'tr') {\r\n            $shape.css({\r\n                'height': xHeight,\r\n                'top': xTop,\r\n                'width': width\r\n            });\r\n        } else if (op === 'tl') {\r\n            $shape.css({\r\n                'height': xHeight,\r\n                'top': xTop,\r\n                'width': xWidth,\r\n                'left': xLeft\r\n            });\r\n        } else if (op === 'bl') {\r\n            $shape.css({\r\n                'width': xWidth,\r\n                'left': xLeft,\r\n                'height': height\r\n            });\r\n        }\r\n        setLayout($shape.find('.comment-section'));\r\n    },\r\n        resizeEnd = function resizeEnd(e) {\r\n        $(window).off('mousemove');\r\n        $(window).off('mouseup');\r\n        //make values in to percentage\r\n        var $shape = resizeStart.self.parents('.shape');\r\n        $shape.css({\r\n            'left': getPercentageValue($shape.position().left, true),\r\n            'top': getPercentageValue($shape.position().top, false),\r\n            'width': getPercentageValue($shape.width(), true),\r\n            'height': getPercentageValue($shape.height(), false)\r\n        });\r\n        resizeStart.self = null;\r\n    },\r\n\r\n    //End of resizing functions\r\n    resetValues = function resetValues() {\r\n        g.contentOffset = g.$container.offset();\r\n        g.containerWidth = g.$container.width();\r\n        g.containerHeight = g.$container.height();\r\n        g.wrapperHeight = g.$container[0].scrollHeight;\r\n    },\r\n        init = function init(payload) {\r\n        if (payload && typeof payload === 'object') {\r\n            for (p in payload) {\r\n                g[p] = payload[p];\r\n            }\r\n        }\r\n        g.$container = $('#pdf-container'); //document.getElementById('pdf-container');\r\n        paintPdf(g.data);\r\n    };\r\n    return {\r\n        init: init\r\n    };\r\n})();"],"sourceRoot":"/source/"}