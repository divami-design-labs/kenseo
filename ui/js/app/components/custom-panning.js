// Link: http://jsfiddle.net/venkateshwar/t368uyxg/

function beginPanning(e) {
    $(window).on('mousemove', startPanning);
    $(window).on('mouseup', endPanning);

    if (!window.customPanning) {
        customPanning = {};
    }
    var $panArea = $('.pan-img'),
        scrollContainer = $panArea[0];
    var panPosition = $panArea.position();
    $panArea.removeClass('animate');
    customPanning.firstX = e.pageX + scrollContainer.scrollLeft;
    customPanning.dragX = panPosition.left;
    customPanning.firstY = e.pageY + scrollContainer.scrollTop;
    customPanning.dragY = panPosition.top;
}

function startPanning(e) {
    var $panArea = $('.pan-img');
    var scrollContainer = $panArea.parents('.container')[0];
    var $img = $('.img-content');

    var left = e.pageX - customPanning.firstX + customPanning.dragX,
        top = e.pageY - customPanning.firstY + customPanning.dragY;

    $panArea.css({
        'left': left,
        'top': top
    });
    return false;
}

function endPanning(e) {
    $(window).off('mousemove', startPanning);
    $(window).off('mouseup', endPanning);

    setPanningDimensions();
}
$(document).on('mousedown', '.pan-img', beginPanning);

function setPanningDimensions() {
    var $img = $('.img-content');
    var $panImg = $('.pan-img');
    var $imgWrapper = $('.img-wrapper');

    $('.pan-img').css({
        'max-width': $('.img-content').width(),
        'max-height': $('.img-content').height()
    });

    var imgOffset = $img.offset();
    var imgWrapperOffset = $imgWrapper.offset();
    var panOffset = $panImg.offset();

    var imgLeft = imgOffset.left;
    var imgTop = imgOffset.top;
    var imgWidth = $img.width();
    var imgHeight = $img.height();

    var imgWrapperLeft = imgWrapperOffset.left;
    var imgWrapperTop = imgWrapperOffset.top;
    var imgWrapperWidth = $imgWrapper.width();
    var imgWrapperHeight = $imgWrapper.height();

    var panLeft = panOffset.left;
    var panTop = panOffset.top;
    var panWidth = $panImg.width();
    var panHeight = $panImg.height();

    var thresholdLeft = imgLeft - imgWrapperLeft;
    var thresholdTop = imgTop - imgWrapperTop;
    var currentLeft = panLeft - imgLeft;
    var currentTop = panTop - imgTop;

    if (currentLeft < 0) {
        $panImg.addClass('animate');
        $panImg.css({
            'left': thresholdLeft
        });
    } else if (currentLeft + panWidth > imgWidth) {
        $panImg.addClass('animate');
        $panImg.css({
            'left': thresholdLeft + Math.abs(imgWidth - panWidth)
        });
    }
    if (currentTop < 0) {
        $panImg.addClass('animate');
        $panImg.css({
            'top': thresholdTop
        });
    } else if (currentTop + panHeight > imgHeight) {
        $panImg.addClass('animate');
        $panImg.css({
            'top': thresholdTop + Math.abs(imgHeight - panHeight)
        });
    }
}
// setPanningDimensions();
window.addEventListener('resize', setPanningDimensions, true);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2JhYmVsLWFwcC9jb21wb25lbnRzL2N1c3RvbS1wYW5uaW5nLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsU0FBUyxZQUFZLENBQUMsQ0FBQyxFQUFFO0FBQ3JCLEtBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsV0FBVyxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQ3hDLEtBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLFVBQVUsQ0FBQyxDQUFDOztBQUVwQyxRQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsRUFBRTtBQUN2QixxQkFBYSxHQUFHLEVBQUUsQ0FBQztLQUN0QjtBQUNELFFBQUksUUFBUSxHQUFHLENBQUMsQ0FBQyxVQUFVLENBQUM7UUFDeEIsZUFBZSxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQyxRQUFJLFdBQVcsR0FBRyxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUM7QUFDdEMsWUFBUSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNoQyxpQkFBYSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLGVBQWUsQ0FBQyxVQUFVLENBQUM7QUFDNUQsaUJBQWEsQ0FBQyxLQUFLLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQztBQUN2QyxpQkFBYSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLGVBQWUsQ0FBQyxTQUFTLENBQUM7QUFDM0QsaUJBQWEsQ0FBQyxLQUFLLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBQztDQUN6Qzs7QUFFRCxTQUFTLFlBQVksQ0FBQyxDQUFDLEVBQUU7QUFDckIsUUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzdCLFFBQUksZUFBZSxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEQsUUFBSSxJQUFJLEdBQUcs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QUMsR0FBRyxDQUFDO0FBQ1Isa0JBQU0sRUFBRSxhQUFhO1NBQ3hCLENBQUMsQ0FBQztLQUNOLE1BQU0sSUFBSSxXQUFXLEdBQUcsUUFBUSxHQUFHLFFBQVEsRUFBRTtBQUMxQyxlQUFPLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQzVCLGVBQU8sQ0FBQyxHQUFHLENBQUM7QUFDUixrQkFBTSxFQUFFLGFBQWEsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7U0FDeEQsQ0FBQyxDQUFDO0tBQ047QUFDRCxRQUFJLFVBQVUsR0FBRyxDQUFDLEVBQUU7QUFDaEIsZUFBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUM1QixlQUFPLENBQUMsR0FBRyxDQUFDO0FBQ1IsaUJBQUssRUFBRSxZQUFZO1NBQ3RCLENBQUMsQ0FBQztLQUNOLE1BQU0sSUFBSSxVQUFVLEdBQUcsU0FBUyxHQUFHLFNBQVMsRUFBRTtBQUMzQyxlQUFPLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQzVCLGVBQU8sQ0FBQyxHQUFHLENBQUM7QUFDUixpQkFBSyxFQUFFLFlBQVksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7U0FDeEQsQ0FBQyxDQUFDO0tBQ047Q0FDSjs7QUFBQSxBQUVELE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLENBQUMiLCJmaWxlIjoiY3VzdG9tLXBhbm5pbmcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBMaW5rOiBodHRwOi8vanNmaWRkbGUubmV0L3ZlbmthdGVzaHdhci90MzY4dXl4Zy9cclxuXHJcbmZ1bmN0aW9uIGJlZ2luUGFubmluZyhlKSB7XHJcbiAgICAkKHdpbmRvdykub24oJ21vdXNlbW92ZScsIHN0YXJ0UGFubmluZyk7XHJcbiAgICAkKHdpbmRvdykub24oJ21vdXNldXAnLCBlbmRQYW5uaW5nKTtcclxuXHJcbiAgICBpZiAoIXdpbmRvdy5jdXN0b21QYW5uaW5nKSB7XHJcbiAgICAgICAgY3VzdG9tUGFubmluZyA9IHt9O1xyXG4gICAgfVxyXG4gICAgdmFyICRwYW5BcmVhID0gJCgnLnBhbi1pbWcnKSxcclxuICAgICAgICBzY3JvbGxDb250YWluZXIgPSAkcGFuQXJlYVswXTtcclxuICAgIHZhciBwYW5Qb3NpdGlvbiA9ICRwYW5BcmVhLnBvc2l0aW9uKCk7XHJcbiAgICAkcGFuQXJlYS5yZW1vdmVDbGFzcygnYW5pbWF0ZScpO1xyXG4gICAgY3VzdG9tUGFubmluZy5maXJzdFggPSBlLnBhZ2VYICsgc2Nyb2xsQ29udGFpbmVyLnNjcm9sbExlZnQ7XHJcbiAgICBjdXN0b21QYW5uaW5nLmRyYWdYID0gcGFuUG9zaXRpb24ubGVmdDtcclxuICAgIGN1c3RvbVBhbm5pbmcuZmlyc3RZID0gZS5wYWdlWSArIHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcbiAgICBjdXN0b21QYW5uaW5nLmRyYWdZID0gcGFuUG9zaXRpb24udG9wO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdGFydFBhbm5pbmcoZSkge1xyXG4gICAgdmFyICRwYW5BcmVhID0gJCgnLnBhbi1pbWcnKTtcclxuICAgIHZhciBzY3JvbGxDb250YWluZXIgPSAkcGFuQXJlYS5wYXJlbnRzKCcuY29udGFpbmVyJylbMF07XHJcbiAgICB2YXIgJGltZyA9ICQoJy5pbWctY29udGVudCcpO1xyXG5cclxuICAgIHZhciBsZWZ0ID0gZS5wYWdlWCAtIGN1c3RvbVBhbm5pbmcuZmlyc3RYICsgY3VzdG9tUGFubmluZy5kcmFnWCxcclxuICAgICAgICB0b3AgPSBlLnBhZ2VZIC0gY3VzdG9tUGFubmluZy5maXJzdFkgKyBjdXN0b21QYW5uaW5nLmRyYWdZO1xyXG5cclxuICAgICRwYW5BcmVhLmNzcyh7XHJcbiAgICAgICAgJ2xlZnQnOiBsZWZ0LFxyXG4gICAgICAgICAgICAndG9wJzogdG9wXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW5kUGFubmluZyhlKSB7XHJcbiAgICAkKHdpbmRvdykub2ZmKCdtb3VzZW1vdmUnLCBzdGFydFBhbm5pbmcpO1xyXG4gICAgJCh3aW5kb3cpLm9mZignbW91c2V1cCcsIGVuZFBhbm5pbmcpO1xyXG5cclxuICAgIHNldFBhbm5pbmdEaW1lbnNpb25zKCk7XHJcbn1cclxuJChkb2N1bWVudCkub24oJ21vdXNlZG93bicsICcucGFuLWltZycsIGJlZ2luUGFubmluZyk7XHJcblxyXG5mdW5jdGlvbiBzZXRQYW5uaW5nRGltZW5zaW9ucygpIHtcclxuICAgIHZhciAkaW1nID0gJCgnLmltZy1jb250ZW50Jyk7XHJcbiAgICB2YXIgJHBhbkltZyA9ICQoJy5wYW4taW1nJyk7XHJcbiAgICB2YXIgJGltZ1dyYXBwZXIgPSAkKCcuaW1nLXdyYXBwZXInKTtcclxuXHJcbiAgICAkKCcucGFuLWltZycpLmNzcyh7XHJcbiAgICAgICAgJ21heC13aWR0aCc6ICQoJy5pbWctY29udGVudCcpLndpZHRoKCksXHJcbiAgICAgICAgICAgICdtYXgtaGVpZ2h0JzogJCgnLmltZy1jb250ZW50JykuaGVpZ2h0KClcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBpbWdPZmZzZXQgPSAkaW1nLm9mZnNldCgpO1xyXG4gICAgdmFyIGltZ1dyYXBwZXJPZmZzZXQgPSAkaW1nV3JhcHBlci5vZmZzZXQoKTtcclxuICAgIHZhciBwYW5PZmZzZXQgPSAkcGFuSW1nLm9mZnNldCgpO1xyXG5cclxuICAgIHZhciBpbWdMZWZ0ID0gaW1nT2Zmc2V0LmxlZnQ7XHJcbiAgICB2YXIgaW1nVG9wID0gaW1nT2Zmc2V0LnRvcDtcclxuICAgIHZhciBpbWdXaWR0aCA9ICRpbWcud2lkdGgoKTtcclxuICAgIHZhciBpbWdIZWlnaHQgPSAkaW1nLmhlaWdodCgpO1xyXG5cclxuICAgIHZhciBpbWdXcmFwcGVyTGVmdCA9IGltZ1dyYXBwZXJPZmZzZXQubGVmdDtcclxuICAgIHZhciBpbWdXcmFwcGVyVG9wID0gaW1nV3JhcHBlck9mZnNldC50b3A7XHJcbiAgICB2YXIgaW1nV3JhcHBlcldpZHRoID0gJGltZ1dyYXBwZXIud2lkdGgoKTtcclxuICAgIHZhciBpbWdXcmFwcGVySGVpZ2h0ID0gJGltZ1dyYXBwZXIuaGVpZ2h0KCk7XHJcblxyXG4gICAgdmFyIHBhbkxlZnQgPSBwYW5PZmZzZXQubGVmdDtcclxuICAgIHZhciBwYW5Ub3AgPSBwYW5PZmZzZXQudG9wO1xyXG4gICAgdmFyIHBhbldpZHRoID0gJHBhbkltZy53aWR0aCgpO1xyXG4gICAgdmFyIHBhbkhlaWdodCA9ICRwYW5JbWcuaGVpZ2h0KCk7XHJcblxyXG4gICAgdmFyIHRocmVzaG9sZExlZnQgPSBpbWdMZWZ0IC0gaW1nV3JhcHBlckxlZnQ7XHJcbiAgICB2YXIgdGhyZXNob2xkVG9wID0gaW1nVG9wIC0gaW1nV3JhcHBlclRvcDtcclxuICAgIHZhciBjdXJyZW50TGVmdCA9IHBhbkxlZnQgLSBpbWdMZWZ0O1xyXG4gICAgdmFyIGN1cnJlbnRUb3AgPSBwYW5Ub3AgLSBpbWdUb3A7XHJcblxyXG4gICAgaWYgKGN1cnJlbnRMZWZ0IDwgMCkge1xyXG4gICAgICAgICRwYW5JbWcuYWRkQ2xhc3MoJ2FuaW1hdGUnKTtcclxuICAgICAgICAkcGFuSW1nLmNzcyh7XHJcbiAgICAgICAgICAgICdsZWZ0JzogdGhyZXNob2xkTGVmdFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmIChjdXJyZW50TGVmdCArIHBhbldpZHRoID4gaW1nV2lkdGgpIHtcclxuICAgICAgICAkcGFuSW1nLmFkZENsYXNzKCdhbmltYXRlJyk7XHJcbiAgICAgICAgJHBhbkltZy5jc3Moe1xyXG4gICAgICAgICAgICAnbGVmdCc6IHRocmVzaG9sZExlZnQgKyBNYXRoLmFicyhpbWdXaWR0aCAtIHBhbldpZHRoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGN1cnJlbnRUb3AgPCAwKSB7XHJcbiAgICAgICAgJHBhbkltZy5hZGRDbGFzcygnYW5pbWF0ZScpO1xyXG4gICAgICAgICRwYW5JbWcuY3NzKHtcclxuICAgICAgICAgICAgJ3RvcCc6IHRocmVzaG9sZFRvcFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmIChjdXJyZW50VG9wICsgcGFuSGVpZ2h0ID4gaW1nSGVpZ2h0KSB7XHJcbiAgICAgICAgJHBhbkltZy5hZGRDbGFzcygnYW5pbWF0ZScpO1xyXG4gICAgICAgICRwYW5JbWcuY3NzKHtcclxuICAgICAgICAgICAgJ3RvcCc6IHRocmVzaG9sZFRvcCArIE1hdGguYWJzKGltZ0hlaWdodCAtIHBhbkhlaWdodClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vLyBzZXRQYW5uaW5nRGltZW5zaW9ucygpO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgc2V0UGFubmluZ0RpbWVuc2lvbnMsIHRydWUpOyJdfQ==