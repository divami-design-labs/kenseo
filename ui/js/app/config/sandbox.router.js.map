{"version":3,"sources":["config/sandbox.router.js"],"names":[],"mappings":"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","file":"config/sandbox.router.js","sourcesContent":["sb.router = {\r\n    menu: function menu() {\r\n        sb.loadFiles({\r\n            'models': ['Header', 'Projects', 'Artefacts', 'People'],\r\n            'collections': ['Projects', 'Artefacts', 'People', 'Notifications'],\r\n            'views': ['Projects', 'Artefacts', 'People', 'Notifications']\r\n        }, function () {\r\n            sb.refresh.section('menu');\r\n        });\r\n    },\r\n    dashboard: function dashboard() {\r\n        sb.loadFiles({\r\n            'views': ['Header', 'Artefacts', 'Projects', 'Notifications'],\r\n            'models': ['Header', 'Notifications', 'Projects', 'Artefacts'],\r\n            'collections': ['Projects', 'Artefacts', 'Notifications']\r\n        }, function () {\r\n            Kenseo.current.page = \"dashboard\";\r\n            sb.setTitle('Dashboard');\r\n\r\n            $('.header').removeClass('fixed-header');\r\n            $('.hamburger-menu').removeClass('active');\r\n            $('.project-section').hide();\r\n            $('.projects-page').hide();\r\n            $('.documentView').hide();\r\n            $('.dashboard-section').show();\r\n            sb.refresh.section('header');\r\n            sb.refresh.section('dashboard');\r\n        });\r\n    },\r\n    projectPage: function projectPage(id) {\r\n        sb.loadFiles({\r\n            'views': ['Header', 'Artefacts', 'People', 'Activities'],\r\n            'models': ['Projects', 'Header', 'Artefacts', 'People'],\r\n            'collections': ['Projects', 'Artefacts', 'People']\r\n        }, function () {\r\n            Kenseo.current.page = \"project-page\";\r\n\r\n            Kenseo.page.id = id;\r\n            $('.hamburger-menu').removeClass('active');\r\n            sb.ajaxCall({\r\n                collection: new Kenseo.collections.Projects(),\r\n                data: {\r\n                    userProjects: true,\r\n                    includeArchives: true\r\n                },\r\n                success: function success(response) {\r\n                    var currentProjectInfo = Kenseo.data.projects[id];\r\n                    sb.setTitle(currentProjectInfo['name']);\r\n                    // sb.setPopupData(currentProjectInfo.name, 'project_name');\r\n                    sb.setPageData(currentProjectInfo, 'project');\r\n                    $('.header').removeClass('fixed-header');\r\n\r\n                    $('.documentView').hide();\r\n                    $('.dashboard-section').hide();\r\n                    $('.project-section').show();\r\n                    $('.projects-page').hide();\r\n                    sb.refresh.section('header');\r\n                    sb.refresh.section('project-page');\r\n                }\r\n            });\r\n        });\r\n    },\r\n    meetingNotes: function meetingNotes(id) {\r\n        Kenseo.data.meetingId = id;\r\n        // Write meeting notes title here\r\n\r\n        //\r\n        sb.loadFiles({\r\n            'views': ['Header', 'Artefacts', 'People', 'Activities'],\r\n            'models': ['Projects', 'Header', 'Artefacts', 'People'],\r\n            'collections': ['Projects', 'Artefacts', 'People'],\r\n            'files': [\r\n                'js/app/components/texteditor.js',\r\n                'js/app/config/sandbox.meeting.js'\r\n            ]\r\n        }, function () {\r\n            Kenseo.current.page = \"meeting-notes\";\r\n            $('.hamburger-menu').removeClass('active');\r\n            $('.projects-page').hide();\r\n            sb.ajaxCall({\r\n                collection: new Kenseo.collections.Projects(),\r\n                data: {\r\n                    userProjects: true\r\n                },\r\n                success: function success(response) {\r\n                    sb.refresh.section('header');\r\n                    sb.refresh.section('meeting-notes');\r\n                }\r\n            });\r\n        });\r\n    },\r\n    documentView: function documentView(id) {\r\n        // if (!Kenseo.data.artefact) {\r\n        //     Kenseo.data.artefact = {};\r\n        // }\r\n        // Kenseo.data.artefact.id = id;\r\n        var maskedId = id;\r\n\r\n        var _this = this;\r\n        sb.loadFiles({\r\n            'views': ['Header'],\r\n            'models': ['Header'],\r\n            'collections': ['People'],\r\n            'files': ['js/libs/pdfjs/pdf.js', 'js/libs/pdfjs/pdf.worker.js', \r\n                    'js/libs/pdfjs/viewer.js', 'js/app/components/annotator.js']\r\n        }, function () {\r\n            Kenseo.current.page = \"document-view\";\r\n\r\n            $('.header').addClass('fixed-header');\r\n            $('.hamburger-menu').removeClass('active');\r\n            $('.project-section').hide();\r\n            $('.dashboard-section').hide();\r\n            $('.projects-page').hide();\r\n            $('.documentView').show();\r\n\r\n            new Kenseo.views.Header({ 'model': new Kenseo.models.Header() });\r\n            $('.header').addClass('fixed-header');\r\n\r\n            var artefactId = sb.getVersionIdFromMaskedId(this);\r\n            //before making the ajax call we need to verify if this document is already existing in the viewer\r\n            if ($('.outerContainer[rel=\"pdf_' + artefactId + '\"]').length > 0) {\r\n                // since it already exists we need to bring it into view\r\n                $('.outerContainer.inView').removeClass('inView');\r\n                $('.tab-item.selectedTab').removeClass('selectedTab');\r\n\r\n                $('.outerContainer[rel=\"pdf_' + artefactId + '\"]').addClass('inView');\r\n\r\n                var removedElem = $('.dv-tab-panel-section').detach('.tab-item[targetrel=' + artefactId + ']');\r\n                $('.dv-tab-panel-section').prepend(removedElem);\r\n                $('.tab-item[targetrel=' + artefactId + ']').addClass('selectedTab');\r\n            } else {\r\n                //since we don't have it in the viewer we need to get its details and render it\r\n                sb.ajaxCall({\r\n                    url: sb.getRelativePath('getArtefactDetails'),\r\n                    data: {\r\n                        // artefactVersionId: Kenseo.data.artefact.id,\r\n                        maskedArtefactVersionId: this,\r\n                        withVersions: true,\r\n                        withComments: true\r\n                    },\r\n                    type: 'GET',\r\n                    success: function success(response) {\r\n                        // console.log(this);\r\n                        var data = response.data;\r\n                        //before painting the new doc lets hide all the existing docs\r\n                        $('.outerContainer.inView').removeClass('inView');\r\n\r\n                        //before adding the new tabItem un select the existing ones\r\n                        $('.tab-item.selectedTab').removeClass('selectedTab');\r\n\r\n                        $(document).on('click', '.tab-item', function (e) {\r\n                            var rel = this.getAttribute('targetrel');\r\n                            $('.tab-item').removeClass('selectedTab');\r\n                            $(this).addClass('selectedTab');\r\n                            $('.outerContainer.inView[rel!=\"pdf_' + rel + '\"]').removeClass('inView');\r\n                            $('.outerContainer[rel=\"pdf_' + rel + '\"]').addClass('inView');\r\n                        });\r\n                        //before painting the pdf into the viewer we need to add a tab for it.\r\n                        // pdf viewer\r\n                        if (data.type == 'application/pdf') {\r\n                            var str = '<a href=\"#documentview/' + data.versionId + '\" class=\"tab-item selectedTab\" targetRel=\"' + data.versionId + '\"><div class= \"fileTab\" ></div></a>';\r\n                            $('.dv-tab-panel-section').prepend(str);\r\n                            $('.pdfs-container').append(_.template(templates['pdf-viewer'])({data: data}));\r\n\r\n                            new paintPdf({\r\n                                url: sb.getRelativePath(data.documentPath),\r\n                                container: $('.outerContainer.inView').get(0),\r\n                                targetId: data.versionId,\r\n                                versionId: data.artefactId,\r\n\r\n                            });\r\n                            sb.setVersionIdForMaskedId(this, data.versionId);\r\n\r\n                            //now get the version details of this version and show shared details\r\n                            sb.renderTemplate({\r\n                                url: sb.getRelativePath('getVersionDetails'),\r\n                                data: {\r\n                                    // versionId: Kenseo.data.artefact.id\r\n                                    versionId: data.versionId\r\n                                },\r\n                                templateName: 'dv-peoplesection',\r\n                                templateHolder: $('.dv-tb-people-section')\r\n                            });\r\n\r\n\r\n\r\n                            // Store the current artefact version related data in a global variable\r\n                            var threads = data.threads;\r\n                            // flag\r\n                            threads.noChangesDetected = true;\r\n                            sb.setCurrentDocumentData(data.versionId, threads);\r\n                            annotator.init();\r\n                        }\r\n                        // Image viewer \r\n                        else if(data.type.indexOf('image') > -1){\r\n                            var str = '<a href=\"#documentview/' + data.versionId + '\" class=\"tab-item selectedTab\" targetRel=\"' + data.versionId + '\"><div class= \" imageTab\" ></div></a>';\r\n                            $('.pdfs-container').append(_.template(templates['image-viewer'])({data: data}));\r\n                            // $('.pdfs-container').append('')\r\n                        }\r\n                        var parent = document.querySelector('#viewerContainer.parent');\r\n                        stickToBottom(parent);\r\n                    }.bind(this)\r\n                });\r\n            }\r\n        }.bind(maskedId));\r\n    },\r\n    projects: function(){\r\n        sb.loadFiles({\r\n            'views': ['Header', 'Projects'],\r\n            'models': ['Header', 'Projects'],\r\n            'collections': ['Projects']\r\n        }, function () {\r\n            Kenseo.current.page = \"projects-page\";\r\n            sb.setTitle('All Projects');\r\n\r\n            $('.header').removeClass('fixed-header');\r\n            $('.hamburger-menu').removeClass('active');\r\n            $('.project-section').hide();\r\n            $('.documentView').hide();\r\n            $('.dashboard-section').hide();\r\n            $('.projects-page').show();\r\n            sb.refresh.section('header');\r\n            sb.refresh.section('projects-page');\r\n        });\r\n    }\r\n};"],"sourceRoot":"/source/"}