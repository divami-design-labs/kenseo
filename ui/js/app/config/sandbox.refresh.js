sb.refresh = (function () {
	var sections = {
		'menu': {
			'menu-section': function () {
				return sb.renderTemplate({ 'templateName': 'nav-menu', 'templateHolder': $('.menu') });
			},
			'menu-header': function () {
				return sb.renderTemplate({ 'templateName': 'menu-header', 'templateHolder': $('.menu-header'), 'model': new Kenseo.models.Header() });
			},
			'menu-projects-container': function () {
				return sb.renderTemplate({ 'templateName': 'menu-projects-container', 'templateHolder': $('.menu-projects-section'), 'collection': new Kenseo.collections.Projects(), 'data': 'menu-projects' });
			},
			'menu-recent-activity': function () {
				return sb.renderTemplate({ 'templateName': 'menu-recent-activity', 'templateHolder': $('.menu-recent-activity-section'), 'collection': new Kenseo.collections.Artefacts(), 'data': 'menu-activities' });
			},
			'menu-request-section': function () {
				return new Kenseo.views.Artefacts({ el: '.menu-recent-requests-section', colStr: 'Artefacts', data: 'menu-artefacts' });
			},
			// sb.renderTemplate({"templateName": 'artefact', "templateHolder": $('.menu-recent-requests-section'), "collection": new Kenseo.collections.Artefacts(), "data": 'menu-artefacts'});
			'menu-recent-notifications': function () {
				return sb.renderTemplate({ 'templateName': 'menu-recent-notifications', 'templateHolder': $('.menu-recent-notifications-section'), 'collection': new Kenseo.collections.Notifications(), 'data': 'menu-notifications' });
			},
			'menu-recent-people': function () {
				return sb.renderTemplate({ 'templateName': 'menu-recent-people', 'templateHolder': $('.menu-recent-people-section'), 'collection': new Kenseo.collections.People(), 'data': 'menu-people' });
			}
		},
		'dashboard': {
			'dashboard-section': function () {
				return sb.renderTemplate({ templateName: 'dashboard', 'templateHolder': $('.dashboard-section') });
			},
			'db-projects': function () {
				// return new Kenseo.views.Projects({ colStr: 'Projects', data: 'db-projects' });
				return sb.renderTemplate({ templateName: 'db-projects-section', 'templateHolder': $('.projects-section-content'), collection: new Kenseo.collections.Projects(), data: 'db-projects' });
			},
			'db-notifications': function () {
				return new Kenseo.views.Notifications({ collection: new Kenseo.collections.Notifications(), data: 'db-notifications' });
				// return sb.renderTemplate({ templateName: 'db-notifications', templateHolder: $('.') collection: new Kenseo.collections.Notifications(), data: 'db-notifications'})
			},
			'db-artefacts': function () {
				$('.review-requests-content').html("");
				// return new Kenseo.views.Artefacts({ colStr: 'Artefacts', data: 'db-artefacts' });
				return sb.renderTemplate({ templateName: 'artefacts', templateHolder: $('.dashboard-section .review-requests-section'), collection: new Kenseo.collections.Artefacts(), data: 'db-artefacts' });
			}
		},
		'header': {
			'header': function () {
				return new Kenseo.views.Header({ 'model': new Kenseo.models.Header() });
			}
		},
		'project-page': {
			'project-page-section': function () {
				return sb.renderTemplate({ 'templateName': 'project-page', 'templateHolder': $('.project-section') });
			},
			'pp-artefacts': function () {
				return new Kenseo.views.Artefacts({
					el: '.artifacts-content',
					id: Kenseo.page.id,
					colStr: 'Artefacts',
					data: { projects: true, project_id: Kenseo.page.id, sharePermission: false, sortBy: 'default' },
					preLoader: function preLoader(response) {
						$('.artifacts-section').html(_.template(templates['artefacts'])(response));
					}
				});
			},
			'pp-activities': function () {
				return new Kenseo.views.Activities({ collection: new Kenseo.collections.Artefacts(), data: { projectActivities: true, project_id: Kenseo.page.id } });
			},
			'pp-people': function () {
				return new Kenseo.views.People({
					el: '.people-section-content',
					colStr: 'People',
					data: { projectId: Kenseo.page.id },
					preLoader: function preLoader(response) {
						$('.people-section').html(_.template(templates['people'])());
					}
				});
			}
		},
		'meeting-notes': {
			'meeting-notes': function () {
				return sb.renderTemplate({
					url: sb.getRelativePath('getMeetingNotes'),
					data: {
						meetingId: Kenseo.data.meetingId
					},
					templateName: 'meetingnotes',
					templateHolder: $('.content-wrapper'),
					callbackfunc: function () {
						//since we have the Html ready now we can have the editor in place.
						var textEditorObj = new textEditor(document.querySelector('.text-editor-section'));
						sb.meeting.notes();
					}
				});
			}
		}
	};

	return {
		section: function (sectionName, subSection) {
			var specificSection = sections[sectionName];
			if (!subSection) {
				for (var s in specificSection) {
					specificSection[s]();
				}
			} else {
				specificSection[subSection]();
			}
		}
	};
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2JhYmVsLWFwcC9jb25maWcvc2FuZGJveC5yZWZyZXNoLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLEVBQUUsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxZQUFVO0FBQ3ZCLEtBQUksUUFBUSxHQUFHO0FBQ2QsUUFBTSxFQUFFO0FBQ1AsaUJBQWMsRUFBRSxZQUFVO0FBQ3pCLFdBQU8sRUFBRSxDQUFDLGNBQWMsQ0FBQyxFQUFFLGNBQWMsRUFBRSxVQUFVLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQTtJQUN0RjtBQUNELGdCQUFhLEVBQUUsWUFBVTtBQUN4QixXQUFPLEVBQUUsQ0FBQyxjQUFjLENBQUMsRUFBRSxjQUFjLEVBQUUsYUFBYSxFQUFFLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxjQUFjLENBQUMsRUFBRSxPQUFPLEVBQUUsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQTtJQUNySTtBQUNRLDRCQUF5QixFQUFFLFlBQVU7QUFDcEMsV0FBTyxFQUFFLENBQUMsY0FBYyxDQUFDLEVBQUUsY0FBYyxFQUFFLHlCQUF5QixFQUFFLGdCQUFnQixFQUFFLENBQUMsQ0FBQyx3QkFBd0IsQ0FBQyxFQUFFLFlBQVksRUFBRSxJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFFLEVBQUUsTUFBTSxFQUFFLGVBQWUsRUFBRSxDQUFDLENBQUM7SUFDak07QUFDRCx5QkFBc0IsRUFBRSxZQUFVO0FBQ2pDLFdBQU8sRUFBRSxDQUFDLGNBQWMsQ0FBQyxFQUFFLGNBQWMsRUFBRSxzQkFBc0IsRUFBRSxnQkFBZ0IsRUFBRSxDQUFDLENBQUMsK0JBQStCLENBQUMsRUFBRSxZQUFZLEVBQUUsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLFNBQVMsRUFBRSxFQUFFLE1BQU0sRUFBRSxpQkFBaUIsRUFBRSxDQUFDLENBQUM7SUFDeE07QUFDRCx5QkFBc0IsRUFB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QzFCLFdBQU8sRUFBRSxDQUFDLGNBQWMsQ0FBQztBQUNaLFFBQUcsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDLGlCQUFpQixDQUFDO0FBQzFDLFNBQUksRUFBRTtBQUNGLGVBQVMsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVM7TUFDbkM7QUFDRCxpQkFBWSxFQUFFLGNBQWM7QUFDNUIsbUJBQWMsRUFBRSxDQUFDLENBQUMsa0JBQWtCLENBQUM7QUFDckMsaUJBQVksRUFBRSxZQUFXOztBQUVyQixVQUFJLGFBQWEsR0FBRyxJQUFJLFVBQVUsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQztBQUNuRixRQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO01BQ3RCO0tBQ0osQ0FBQyxDQUFDO0lBQ1o7R0FDRDtFQUNELENBQUE7O0FBRUQsUUFBTztBQUNOLFNBQU8sRUFBRSxVQUFTLFdBQVcsRUFBRSxVQUFVLEVBQUM7QUFDekMsT0FBSSxlQUFlLEdBQUcsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQzVDLE9BQUcsQ0FBQyxVQUFVLEVBQUM7QUFDZCxTQUFJLElBQUksQ0FBQyxJQUFJLGVBQWUsRUFBQztBQUM1QixvQkFBZSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7S0FDckI7SUFDRCxNQUNHO0FBQ0gsbUJBQWUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDO0lBQzlCO0dBQ0Q7RUFDRCxDQUFBO0NBQ0QsQ0FBQSxFQUFHLENBQUMiLCJmaWxlIjoic2FuZGJveC5yZWZyZXNoLmpzIiwic291cmNlc0NvbnRlbnQiOlsic2IucmVmcmVzaCA9IChmdW5jdGlvbigpe1xyXG5cdHZhciBzZWN0aW9ucyA9IHtcclxuXHRcdCdtZW51Jzoge1xyXG5cdFx0XHQnbWVudS1zZWN0aW9uJzogZnVuY3Rpb24oKXsgXHJcblx0XHRcdFx0cmV0dXJuIHNiLnJlbmRlclRlbXBsYXRlKHsgJ3RlbXBsYXRlTmFtZSc6ICduYXYtbWVudScsICd0ZW1wbGF0ZUhvbGRlcic6ICQoJy5tZW51JykgfSlcclxuXHRcdFx0fSxcclxuXHRcdFx0J21lbnUtaGVhZGVyJzogZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRyZXR1cm4gc2IucmVuZGVyVGVtcGxhdGUoeyAndGVtcGxhdGVOYW1lJzogJ21lbnUtaGVhZGVyJywgJ3RlbXBsYXRlSG9sZGVyJzogJCgnLm1lbnUtaGVhZGVyJyksICdtb2RlbCc6IG5ldyBLZW5zZW8ubW9kZWxzLkhlYWRlcigpIH0pXHJcblx0XHRcdH0sXHJcbiAgICAgICAgICAgICdtZW51LXByb2plY3RzLWNvbnRhaW5lcic6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIFx0cmV0dXJuIHNiLnJlbmRlclRlbXBsYXRlKHsgJ3RlbXBsYXRlTmFtZSc6ICdtZW51LXByb2plY3RzLWNvbnRhaW5lcicsICd0ZW1wbGF0ZUhvbGRlcic6ICQoJy5tZW51LXByb2plY3RzLXNlY3Rpb24nKSwgJ2NvbGxlY3Rpb24nOiBuZXcgS2Vuc2VvLmNvbGxlY3Rpb25zLlByb2plY3RzKCksICdkYXRhJzogJ21lbnUtcHJvamVjdHMnIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnbWVudS1yZWNlbnQtYWN0aXZpdHknOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBcdHJldHVybiBzYi5yZW5kZXJUZW1wbGF0ZSh7ICd0ZW1wbGF0ZU5hbWUnOiAnbWVudS1yZWNlbnQtYWN0aXZpdHknLCAndGVtcGxhdGVIb2xkZXInOiAkKCcubWVudS1yZWNlbnQtYWN0aXZpdHktc2VjdGlvbicpLCAnY29sbGVjdGlvbic6IG5ldyBLZW5zZW8uY29sbGVjdGlvbnMuQXJ0ZWZhY3RzKCksICdkYXRhJzogJ21lbnUtYWN0aXZpdGllcycgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdtZW51LXJlcXVlc3Qtc2VjdGlvbic6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIFx0cmV0dXJuIG5ldyBLZW5zZW8udmlld3MuQXJ0ZWZhY3RzKHsgZWw6ICcubWVudS1yZWNlbnQtcmVxdWVzdHMtc2VjdGlvbicsIGNvbFN0cjogJ0FydGVmYWN0cycsIGRhdGE6ICdtZW51LWFydGVmYWN0cycgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIHNiLnJlbmRlclRlbXBsYXRlKHtcInRlbXBsYXRlTmFtZVwiOiAnYXJ0ZWZhY3QnLCBcInRlbXBsYXRlSG9sZGVyXCI6ICQoJy5tZW51LXJlY2VudC1yZXF1ZXN0cy1zZWN0aW9uJyksIFwiY29sbGVjdGlvblwiOiBuZXcgS2Vuc2VvLmNvbGxlY3Rpb25zLkFydGVmYWN0cygpLCBcImRhdGFcIjogJ21lbnUtYXJ0ZWZhY3RzJ30pO1xyXG4gICAgICAgICAgICAnbWVudS1yZWNlbnQtbm90aWZpY2F0aW9ucyc6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIFx0cmV0dXJuIHNiLnJlbmRlclRlbXBsYXRlKHsgJ3RlbXBsYXRlTmFtZSc6ICdtZW51LXJlY2VudC1ub3RpZmljYXRpb25zJywgJ3RlbXBsYXRlSG9sZGVyJzogJCgnLm1lbnUtcmVjZW50LW5vdGlmaWNhdGlvbnMtc2VjdGlvbicpLCAnY29sbGVjdGlvbic6IG5ldyBLZW5zZW8uY29sbGVjdGlvbnMuTm90aWZpY2F0aW9ucygpLCAnZGF0YSc6ICdtZW51LW5vdGlmaWNhdGlvbnMnIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnbWVudS1yZWNlbnQtcGVvcGxlJzogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgXHRyZXR1cm4gc2IucmVuZGVyVGVtcGxhdGUoeyAndGVtcGxhdGVOYW1lJzogJ21lbnUtcmVjZW50LXBlb3BsZScsICd0ZW1wbGF0ZUhvbGRlcic6ICQoJy5tZW51LXJlY2VudC1wZW9wbGUtc2VjdGlvbicpLCAnY29sbGVjdGlvbic6IG5ldyBLZW5zZW8uY29sbGVjdGlvbnMuUGVvcGxlKCksICdkYXRhJzogJ21lbnUtcGVvcGxlJyB9KTtcclxuICAgICAgICAgICAgfVxyXG5cdFx0fSxcclxuXHRcdCdkYXNoYm9hcmQnOiB7XHJcblx0XHRcdCdkYXNoYm9hcmQtc2VjdGlvbic6IGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0cmV0dXJuIHNiLnJlbmRlclRlbXBsYXRlKHsgdGVtcGxhdGVOYW1lOiAnZGFzaGJvYXJkJywgJ3RlbXBsYXRlSG9sZGVyJzogJCgnLmRhc2hib2FyZC1zZWN0aW9uJykgfSk7XHJcblx0XHRcdH0sXHJcbiAgICAgICAgICAgICdkYi1wcm9qZWN0cyc6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIFx0Ly8gcmV0dXJuIG5ldyBLZW5zZW8udmlld3MuUHJvamVjdHMoeyBjb2xTdHI6ICdQcm9qZWN0cycsIGRhdGE6ICdkYi1wcm9qZWN0cycgfSk7XHJcbiAgICAgICAgICAgIFx0cmV0dXJuIHNiLnJlbmRlclRlbXBsYXRlKHsgdGVtcGxhdGVOYW1lOiAnZGItcHJvamVjdHMtc2VjdGlvbicsICd0ZW1wbGF0ZUhvbGRlcic6ICQoJy5wcm9qZWN0cy1zZWN0aW9uLWNvbnRlbnQnKSwgY29sbGVjdGlvbjogbmV3IEtlbnNlby5jb2xsZWN0aW9ucy5Qcm9qZWN0cygpLCBkYXRhOiAnZGItcHJvamVjdHMnfSlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2RiLW5vdGlmaWNhdGlvbnMnOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBcdHJldHVybiBuZXcgS2Vuc2VvLnZpZXdzLk5vdGlmaWNhdGlvbnMoeyBjb2xsZWN0aW9uOiBuZXcgS2Vuc2VvLmNvbGxlY3Rpb25zLk5vdGlmaWNhdGlvbnMoKSwgZGF0YTogJ2RiLW5vdGlmaWNhdGlvbnMnIH0pO1xyXG4gICAgICAgICAgICBcdC8vIHJldHVybiBzYi5yZW5kZXJUZW1wbGF0ZSh7IHRlbXBsYXRlTmFtZTogJ2RiLW5vdGlmaWNhdGlvbnMnLCB0ZW1wbGF0ZUhvbGRlcjogJCgnLicpIGNvbGxlY3Rpb246IG5ldyBLZW5zZW8uY29sbGVjdGlvbnMuTm90aWZpY2F0aW9ucygpLCBkYXRhOiAnZGItbm90aWZpY2F0aW9ucyd9KVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZGItYXJ0ZWZhY3RzJzogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgXHQkKCcucmV2aWV3LXJlcXVlc3RzLWNvbnRlbnQnKS5odG1sKFwiXCIpO1xyXG4gICAgICAgICAgICBcdC8vIHJldHVybiBuZXcgS2Vuc2VvLnZpZXdzLkFydGVmYWN0cyh7IGNvbFN0cjogJ0FydGVmYWN0cycsIGRhdGE6ICdkYi1hcnRlZmFjdHMnIH0pO1xyXG4gICAgICAgICAgICBcdHJldHVybiBzYi5yZW5kZXJUZW1wbGF0ZSh7IHRlbXBsYXRlTmFtZTogJ2FydGVmYWN0cycsIHRlbXBsYXRlSG9sZGVyOiAkKCcuZGFzaGJvYXJkLXNlY3Rpb24gLnJldmlldy1yZXF1ZXN0cy1zZWN0aW9uJyksIGNvbGxlY3Rpb246IG5ldyBLZW5zZW8uY29sbGVjdGlvbnMuQXJ0ZWZhY3RzKCksIGRhdGE6ICdkYi1hcnRlZmFjdHMnfSlcclxuICAgICAgICAgICAgfVxyXG5cdFx0fSxcclxuXHRcdCdoZWFkZXInOiB7XHJcblx0XHRcdCdoZWFkZXInOiBmdW5jdGlvbigpe1xyXG5cdFx0XHRcdHJldHVybiBuZXcgS2Vuc2VvLnZpZXdzLkhlYWRlcih7ICdtb2RlbCc6IG5ldyBLZW5zZW8ubW9kZWxzLkhlYWRlcigpIH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J3Byb2plY3QtcGFnZSc6IHtcclxuXHRcdFx0J3Byb2plY3QtcGFnZS1zZWN0aW9uJzogZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRyZXR1cm4gc2IucmVuZGVyVGVtcGxhdGUoeyAndGVtcGxhdGVOYW1lJzogJ3Byb2plY3QtcGFnZScsICd0ZW1wbGF0ZUhvbGRlcic6ICQoJy5wcm9qZWN0LXNlY3Rpb24nKSB9KTtcclxuXHRcdFx0fSxcclxuICAgICAgICAgICAgJ3BwLWFydGVmYWN0cyc6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBcdHJldHVybiBuZXcgS2Vuc2VvLnZpZXdzLkFydGVmYWN0cyh7XHJcblx0ICAgICAgICAgICAgICAgIGVsOiAnLmFydGlmYWN0cy1jb250ZW50JyxcclxuXHQgICAgICAgICAgICAgICAgaWQ6IEtlbnNlby5wYWdlLmlkLFxyXG5cdCAgICAgICAgICAgICAgICBjb2xTdHI6ICdBcnRlZmFjdHMnLFxyXG5cdCAgICAgICAgICAgICAgICBkYXRhOiB7IHByb2plY3RzOiB0cnVlLCBwcm9qZWN0X2lkOiBLZW5zZW8ucGFnZS5pZCwgc2hhcmVQZXJtaXNzaW9uOiBmYWxzZSwgc29ydEJ5OiAnZGVmYXVsdCcgfSxcclxuXHQgICAgICAgICAgICAgICAgcHJlTG9hZGVyOiBmdW5jdGlvbiBwcmVMb2FkZXIocmVzcG9uc2UpIHtcclxuXHQgICAgICAgICAgICAgICAgICAgICQoJy5hcnRpZmFjdHMtc2VjdGlvbicpLmh0bWwoXy50ZW1wbGF0ZSh0ZW1wbGF0ZXNbJ2FydGVmYWN0cyddKShyZXNwb25zZSkpO1xyXG5cdCAgICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdwcC1hY3Rpdml0aWVzJzogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgXHRyZXR1cm4gbmV3IEtlbnNlby52aWV3cy5BY3Rpdml0aWVzKHsgY29sbGVjdGlvbjogbmV3IEtlbnNlby5jb2xsZWN0aW9ucy5BcnRlZmFjdHMoKSwgZGF0YTogeyBwcm9qZWN0QWN0aXZpdGllczogdHJ1ZSwgcHJvamVjdF9pZDogS2Vuc2VvLnBhZ2UuaWQgfSB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3BwLXBlb3BsZSc6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIFx0cmV0dXJuIG5ldyBLZW5zZW8udmlld3MuUGVvcGxlKHtcclxuXHQgICAgICAgICAgICAgICAgZWw6ICcucGVvcGxlLXNlY3Rpb24tY29udGVudCcsXHJcblx0ICAgICAgICAgICAgICAgIGNvbFN0cjogJ1Blb3BsZScsXHJcblx0ICAgICAgICAgICAgICAgIGRhdGE6IHsgcHJvamVjdElkOiBLZW5zZW8ucGFnZS5pZCB9LFxyXG5cdCAgICAgICAgICAgICAgICBwcmVMb2FkZXI6IGZ1bmN0aW9uIHByZUxvYWRlcihyZXNwb25zZSkge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgJCgnLnBlb3BsZS1zZWN0aW9uJykuaHRtbChfLnRlbXBsYXRlKHRlbXBsYXRlc1sncGVvcGxlJ10pKCkpO1xyXG5cdCAgICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHRcdH0sXHJcblx0XHQnbWVldGluZy1ub3Rlcyc6IHtcclxuXHRcdFx0J21lZXRpbmctbm90ZXMnOiBmdW5jdGlvbigpe1xyXG5cdFx0XHRcdHJldHVybiBzYi5yZW5kZXJUZW1wbGF0ZSh7XHJcblx0ICAgICAgICAgICAgICAgIHVybDogc2IuZ2V0UmVsYXRpdmVQYXRoKCdnZXRNZWV0aW5nTm90ZXMnKSxcclxuXHQgICAgICAgICAgICAgICAgZGF0YToge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgbWVldGluZ0lkOiBLZW5zZW8uZGF0YS5tZWV0aW5nSWRcclxuXHQgICAgICAgICAgICAgICAgfSxcclxuXHQgICAgICAgICAgICAgICAgdGVtcGxhdGVOYW1lOiAnbWVldGluZ25vdGVzJyxcclxuXHQgICAgICAgICAgICAgICAgdGVtcGxhdGVIb2xkZXI6ICQoJy5jb250ZW50LXdyYXBwZXInKSxcclxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2tmdW5jOiBmdW5jdGlvbigpIHtcclxuXHQgICAgICAgICAgICAgICAgICAgIC8vc2luY2Ugd2UgaGF2ZSB0aGUgSHRtbCByZWFkeSBub3cgd2UgY2FuIGhhdmUgdGhlIGVkaXRvciBpbiBwbGFjZS5cclxuXHQgICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0RWRpdG9yT2JqID0gbmV3IHRleHRFZGl0b3IoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtZWRpdG9yLXNlY3Rpb24nKSk7XHJcblx0ICAgICAgICAgICAgICAgICAgICBzYi5tZWV0aW5nLm5vdGVzKCk7XHJcblx0ICAgICAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICB9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdHNlY3Rpb246IGZ1bmN0aW9uKHNlY3Rpb25OYW1lLCBzdWJTZWN0aW9uKXtcclxuXHRcdFx0dmFyIHNwZWNpZmljU2VjdGlvbiA9IHNlY3Rpb25zW3NlY3Rpb25OYW1lXTtcclxuXHRcdFx0aWYoIXN1YlNlY3Rpb24pe1xyXG5cdFx0XHRcdGZvcih2YXIgcyBpbiBzcGVjaWZpY1NlY3Rpb24pe1xyXG5cdFx0XHRcdFx0c3BlY2lmaWNTZWN0aW9uW3NdKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2V7XHJcblx0XHRcdFx0c3BlY2lmaWNTZWN0aW9uW3N1YlNlY3Rpb25dKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7Il19