sb.documentview = {
	imageSlider: function imageSlider() {
		var left = document.querySelector('.left-slider'),
		    right = document.querySelector('.right-slider'),
		    main = document.querySelector('.dv-tb-people'),
		    h = 44;

		var threshold = 3 * h - main.offsetWidth;

		function setCalculation(bln, el, val, currentLeft) {
			if (bln) {
				if (val) {
					main.style.left = val + currentLeft + 'px';
				}
				$(el).addClass('active');
			} else {
				$(el).removeClass('active');
			}
		}
		function calculate(leftVal, rightVal) {
			if (leftVal) {
				var currentLeft = parseInt(main.style.left, 10) || 0;

				// Calculate left
				setCalculation(currentLeft < 0 && currentLeft >= threshold, left, leftVal, currentLeft);
			}

			var currentLeft = parseInt(main.style.left, 10) || 0;
			// Calculate right
			setCalculation(currentLeft <= 0 && currentLeft > threshold, right, rightVal, currentLeft);

			if (!leftVal) {
				var currentLeft = parseInt(main.style.left, 10) || 0;

				// Calculate left
				setCalculation(currentLeft < 0 && currentLeft >= threshold, left, leftVal, currentLeft);
			}
		}
		calculate(0);
		if (left) {
			left.onclick = function () {
				calculate(h, null);
				calculate(0);
			};
		}
		if (right) {
			right.onclick = function () {
				calculate(null, 0 - h);
				calculate(0);
			};
		}
	},
	pagination: function pagination() {
		function gotoPage(value) {
			$pdf = $('#pdf-container'), $a = $('a[href="' + value + '"]');
			$pdf.scrollTop($pdf.scrollTop() + $a.offset().top);
		}
		$('#pdf-container').scroll(function () {
			var $self = $(this),
			    scrollTop = $self.scrollTop(),
			    height = $('.pdf-page').height(),
			    xHeight = $self.height();

			$anchors = $self.find('a');
			selectedAnchor = null;
			for (var i = 0; i < $anchors.length; i++) {
				var a = $anchors[i],
				    top = a.offsetTop;
				if (top <= scrollTop + xHeight / 3) {
					selectedAnchor = a;
				} else {
					break;
				}
			}
			if (selectedAnchor) {
				$('.range').html($(selectedAnchor).attr('href'));
			}
		});
		$(document).on('keypress', '.range', function (e) {
			var sel = document.getSelection();
			var keyCode = e.which || e.keyCode,
			    pressedChar = String.fromCharCode(keyCode),
			    start = sel.extentOffset,
			    end = sel.baseOffset,
			    str = this.innerHTML,
			    re = /^\d+$/,
			    curValue = str.substr(0, start) + pressedChar + str.substr(end);
			min = $(this).data('min'), max = $(this).data('max');

			if (re.test(curValue)) {
				if (min > curValue || max < curValue) {
					return false;
				}
				return true;
			} else if (keyCode == 13) {
				if (re.test(this.innerHTML)) {
					gotoPage(this.innerHTML);
				}
			} else {
				return false;
			}
		});

		$(document).on('click', '.next-page', function (e) {
			var curPage = $('.range').html();
			curPage++;
			if (curPage <= $('.range').data('max') && curPage > $('.range').data('min')) {
				$('.range').html(curPage);
				gotoPage(curPage);
			}
		});

		$(document).on('click', '.previous-page', function (e) {
			var curPage = $('.range').html();
			curPage--;
			if (curPage < $('.range').data('max') && curPage >= $('.range').data('min')) {
				$('.range').html(curPage);
				gotoPage(curPage);
			}
		});
	},
	zoomSlider: function zoomSlider() {
		function moveIt($el, e) {
			var remaining = e.pageX - $el.offset().left,
			    width = $el.width();

			var thumbWidth = $('.thumb').width();
			if (remaining < 0) {
				remaining = 0;
			} else if (remaining > width - thumbWidth) {
				remaining = width - thumbWidth;
			}
			remaining = remaining / width * 100;
			$('.thumb').css({
				'left': remaining + '%'
			}).attr('range-value', remaining);
		}
		$('.thumb').on('mousedown', function () {
			$(window).on('mousemove', function (e) {
				moveIt($('.slider'), e);
			});

			$(window).on('mouseup', function () {
				$(window).off('mousemove');
			});
		});

		$('.slider').on('click', function (e) {
			moveIt($(this), e);
		});
	}
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2JhYmVsLWFwcC9jb25maWcvc2FuZGJveC5kb2N1bWVudHZpZXcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsRUFBRSxDQUFDLFlBQVksR0FBRztBQUNqQixZQUFXLEVBQUUsU0FBUyxXQUFXLEdBQUc7QUFDbkMsTUFBSSxJQUFJLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUM7TUFDN0MsS0FBSyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDO01BQy9DLElBQUksR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQztNQUM5QyxDQUFDLEdBQUcsRUFBRSxDQUFDOztBQUVYLE1BQUksU0FBUyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQzs7QUFFekMsV0FBUyxjQUFjLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFO0FBQ2xELE9BQUksR0FBRyxFQUFFO0FBQ1IsUUFBSSxHQUFHLEVBQUU7QUFDUixTQUFJLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsV0FBVyxHQUFHLElBQUksQ0FBQztLQUMzQztBQUNELEtBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDekIsTUFBTTtBQUNOLEtBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDNUI7R0FDRDtBQUNELFdBQVMsU0FBUyxDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUU7QUFDckMsT0FBSSxPQUFPLEVBQUU7QUFDWixRQUFJLFdBQVcsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQzs7O0FBQUMsQUFHckQsa0JBQWMsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxJQUFJLFdBQVcsSUFBSSxTQUFTLEVBQUUsSUFBSSxF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bnQiOlsic2IuZG9jdW1lbnR2aWV3ID0ge1xuXHRpbWFnZVNsaWRlcjogZnVuY3Rpb24gaW1hZ2VTbGlkZXIoKSB7XG5cdFx0dmFyIGxlZnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGVmdC1zbGlkZXInKSxcblx0XHQgICAgcmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmlnaHQtc2xpZGVyJyksXG5cdFx0ICAgIG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHYtdGItcGVvcGxlJyksXG5cdFx0ICAgIGggPSA0NDtcblxuXHRcdHZhciB0aHJlc2hvbGQgPSAzICogaCAtIG1haW4ub2Zmc2V0V2lkdGg7XG5cblx0XHRmdW5jdGlvbiBzZXRDYWxjdWxhdGlvbihibG4sIGVsLCB2YWwsIGN1cnJlbnRMZWZ0KSB7XG5cdFx0XHRpZiAoYmxuKSB7XG5cdFx0XHRcdGlmICh2YWwpIHtcblx0XHRcdFx0XHRtYWluLnN0eWxlLmxlZnQgPSB2YWwgKyBjdXJyZW50TGVmdCArICdweCc7XG5cdFx0XHRcdH1cblx0XHRcdFx0JChlbCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JChlbCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRmdW5jdGlvbiBjYWxjdWxhdGUobGVmdFZhbCwgcmlnaHRWYWwpIHtcblx0XHRcdGlmIChsZWZ0VmFsKSB7XG5cdFx0XHRcdHZhciBjdXJyZW50TGVmdCA9IHBhcnNlSW50KG1haW4uc3R5bGUubGVmdCwgMTApIHx8IDA7XG5cblx0XHRcdFx0Ly8gQ2FsY3VsYXRlIGxlZnRcblx0XHRcdFx0c2V0Q2FsY3VsYXRpb24oY3VycmVudExlZnQgPCAwICYmIGN1cnJlbnRMZWZ0ID49IHRocmVzaG9sZCwgbGVmdCwgbGVmdFZhbCwgY3VycmVudExlZnQpO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgY3VycmVudExlZnQgPSBwYXJzZUludChtYWluLnN0eWxlLmxlZnQsIDEwKSB8fCAwO1xuXHRcdFx0Ly8gQ2FsY3VsYXRlIHJpZ2h0XG5cdFx0XHRzZXRDYWxjdWxhdGlvbihjdXJyZW50TGVmdCA8PSAwICYmIGN1cnJlbnRMZWZ0ID4gdGhyZXNob2xkLCByaWdodCwgcmlnaHRWYWwsIGN1cnJlbnRMZWZ0KTtcblxuXHRcdFx0aWYgKCFsZWZ0VmFsKSB7XG5cdFx0XHRcdHZhciBjdXJyZW50TGVmdCA9IHBhcnNlSW50KG1haW4uc3R5bGUubGVmdCwgMTApIHx8IDA7XG5cblx0XHRcdFx0Ly8gQ2FsY3VsYXRlIGxlZnRcblx0XHRcdFx0c2V0Q2FsY3VsYXRpb24oY3VycmVudExlZnQgPCAwICYmIGN1cnJlbnRMZWZ0ID49IHRocmVzaG9sZCwgbGVmdCwgbGVmdFZhbCwgY3VycmVudExlZnQpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjYWxjdWxhdGUoMCk7XG5cdFx0aWYgKGxlZnQpIHtcblx0XHRcdGxlZnQub25jbGljayA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Y2FsY3VsYXRlKGgsIG51bGwpO1xuXHRcdFx0XHRjYWxjdWxhdGUoMCk7XG5cdFx0XHR9O1xuXHRcdH1cblx0XHRpZiAocmlnaHQpIHtcblx0XHRcdHJpZ2h0Lm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGNhbGN1bGF0ZShudWxsLCAwIC0gaCk7XG5cdFx0XHRcdGNhbGN1bGF0ZSgwKTtcblx0XHRcdH07XG5cdFx0fVxuXHR9LFxuXHRwYWdpbmF0aW9uOiBmdW5jdGlvbiBwYWdpbmF0aW9uKCkge1xuXHRcdGZ1bmN0aW9uIGdvdG9QYWdlKHZhbHVlKSB7XG5cdFx0XHQkcGRmID0gJCgnI3BkZi1jb250YWluZXInKSwgJGEgPSAkKCdhW2hyZWY9XCInICsgdmFsdWUgKyAnXCJdJyk7XG5cdFx0XHQkcGRmLnNjcm9sbFRvcCgkcGRmLnNjcm9sbFRvcCgpICsgJGEub2Zmc2V0KCkudG9wKTtcblx0XHR9XG5cdFx0JCgnI3BkZi1jb250YWluZXInKS5zY3JvbGwoZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyICRzZWxmID0gJCh0aGlzKSxcblx0XHRcdCAgICBzY3JvbGxUb3AgPSAkc2VsZi5zY3JvbGxUb3AoKSxcblx0XHRcdCAgICBoZWlnaHQgPSAkKCcucGRmLXBhZ2UnKS5oZWlnaHQoKSxcblx0XHRcdCAgICB4SGVpZ2h0ID0gJHNlbGYuaGVpZ2h0KCk7XG5cblx0XHRcdCRhbmNob3JzID0gJHNlbGYuZmluZCgnYScpO1xuXHRcdFx0c2VsZWN0ZWRBbmNob3IgPSBudWxsO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCAkYW5jaG9ycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgYSA9ICRhbmNob3JzW2ldLFxuXHRcdFx0XHQgICAgdG9wID0gYS5vZmZzZXRUb3A7XG5cdFx0XHRcdGlmICh0b3AgPD0gc2Nyb2xsVG9wICsgeEhlaWdodCAvIDMpIHtcblx0XHRcdFx0XHRzZWxlY3RlZEFuY2hvciA9IGE7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmIChzZWxlY3RlZEFuY2hvcikge1xuXHRcdFx0XHQkKCcucmFuZ2UnKS5odG1sKCQoc2VsZWN0ZWRBbmNob3IpLmF0dHIoJ2hyZWYnKSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0JChkb2N1bWVudCkub24oJ2tleXByZXNzJywgJy5yYW5nZScsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHR2YXIgc2VsID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7XG5cdFx0XHR2YXIga2V5Q29kZSA9IGUud2hpY2ggfHwgZS5rZXlDb2RlLFxuXHRcdFx0ICAgIHByZXNzZWRDaGFyID0gU3RyaW5nLmZyb21DaGFyQ29kZShrZXlDb2RlKSxcblx0XHRcdCAgICBzdGFydCA9IHNlbC5leHRlbnRPZmZzZXQsXG5cdFx0XHQgICAgZW5kID0gc2VsLmJhc2VPZmZzZXQsXG5cdFx0XHQgICAgc3RyID0gdGhpcy5pbm5lckhUTUwsXG5cdFx0XHQgICAgcmUgPSAvXlxcZCskLyxcblx0XHRcdCAgICBjdXJWYWx1ZSA9IHN0ci5zdWJzdHIoMCwgc3RhcnQpICsgcHJlc3NlZENoYXIgKyBzdHIuc3Vic3RyKGVuZCk7XG5cdFx0XHRtaW4gPSAkKHRoaXMpLmRhdGEoJ21pbicpLCBtYXggPSAkKHRoaXMpLmRhdGEoJ21heCcpO1xuXG5cdFx0XHRpZiAocmUudGVzdChjdXJWYWx1ZSkpIHtcblx0XHRcdFx0aWYgKG1pbiA+IGN1clZhbHVlIHx8IG1heCA8IGN1clZhbHVlKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIGlmIChrZXlDb2RlID09IDEzKSB7XG5cdFx0XHRcdGlmIChyZS50ZXN0KHRoaXMuaW5uZXJIVE1MKSkge1xuXHRcdFx0XHRcdGdvdG9QYWdlKHRoaXMuaW5uZXJIVE1MKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5uZXh0LXBhZ2UnLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0dmFyIGN1clBhZ2UgPSAkKCcucmFuZ2UnKS5odG1sKCk7XG5cdFx0XHRjdXJQYWdlKys7XG5cdFx0XHRpZiAoY3VyUGFnZSA8PSAkKCcucmFuZ2UnKS5kYXRhKCdtYXgnKSAmJiBjdXJQYWdlID4gJCgnLnJhbmdlJykuZGF0YSgnbWluJykpIHtcblx0XHRcdFx0JCgnLnJhbmdlJykuaHRtbChjdXJQYWdlKTtcblx0XHRcdFx0Z290b1BhZ2UoY3VyUGFnZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnByZXZpb3VzLXBhZ2UnLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0dmFyIGN1clBhZ2UgPSAkKCcucmFuZ2UnKS5odG1sKCk7XG5cdFx0XHRjdXJQYWdlLS07XG5cdFx0XHRpZiAoY3VyUGFnZSA8ICQoJy5yYW5nZScpLmRhdGEoJ21heCcpICYmIGN1clBhZ2UgPj0gJCgnLnJhbmdlJykuZGF0YSgnbWluJykpIHtcblx0XHRcdFx0JCgnLnJhbmdlJykuaHRtbChjdXJQYWdlKTtcblx0XHRcdFx0Z290b1BhZ2UoY3VyUGFnZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cdHpvb21TbGlkZXI6IGZ1bmN0aW9uIHpvb21TbGlkZXIoKSB7XG5cdFx0ZnVuY3Rpb24gbW92ZUl0KCRlbCwgZSkge1xuXHRcdFx0dmFyIHJlbWFpbmluZyA9IGUucGFnZVggLSAkZWwub2Zmc2V0KCkubGVmdCxcblx0XHRcdCAgICB3aWR0aCA9ICRlbC53aWR0aCgpO1xuXG5cdFx0XHR2YXIgdGh1bWJXaWR0aCA9ICQoJy50aHVtYicpLndpZHRoKCk7XG5cdFx0XHRpZiAocmVtYWluaW5nIDwgMCkge1xuXHRcdFx0XHRyZW1haW5pbmcgPSAwO1xuXHRcdFx0fSBlbHNlIGlmIChyZW1haW5pbmcgPiB3aWR0aCAtIHRodW1iV2lkdGgpIHtcblx0XHRcdFx0cmVtYWluaW5nID0gd2lkdGggLSB0aHVtYldpZHRoO1xuXHRcdFx0fVxuXHRcdFx0cmVtYWluaW5nID0gcmVtYWluaW5nIC8gd2lkdGggKiAxMDA7XG5cdFx0XHQkKCcudGh1bWInKS5jc3Moe1xuXHRcdFx0XHQnbGVmdCc6IHJlbWFpbmluZyArICclJ1xuXHRcdFx0fSkuYXR0cigncmFuZ2UtdmFsdWUnLCByZW1haW5pbmcpO1xuXHRcdH1cblx0XHQkKCcudGh1bWInKS5vbignbW91c2Vkb3duJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0JCh3aW5kb3cpLm9uKCdtb3VzZW1vdmUnLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRtb3ZlSXQoJCgnLnNsaWRlcicpLCBlKTtcblx0XHRcdH0pO1xuXG5cdFx0XHQkKHdpbmRvdykub24oJ21vdXNldXAnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQod2luZG93KS5vZmYoJ21vdXNlbW92ZScpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQkKCcuc2xpZGVyJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdG1vdmVJdCgkKHRoaXMpLCBlKTtcblx0XHR9KTtcblx0fVxufTsiXX0=